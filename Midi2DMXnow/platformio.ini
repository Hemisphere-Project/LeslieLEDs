[platformio]
default_envs = m5stack_atoms3

; ========================================
; M5Stack AtomS3 (ESP32-S3) - USB MIDI
; ========================================
[env:m5stack_atoms3]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/55.03.33/platform-espressif32.zip
board = m5stack-atoms3
framework = arduino

build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=0
    -DPLATFORM_ATOMS3
    -DUSE_USB_MIDI
    -DLED_DATA_PIN=2
    -DLED_COUNT=300

lib_extra_dirs = 
    ../LEDengine
    ../shared_libs

lib_deps = 
    m5stack/M5Unified@0.2.10
    fastled/FastLED@3.10.3
    https://github.com/Hemisphere-Project/ESPNowDMX.git
    https://github.com/Hemisphere-Project/ESPNowMeshClock.git

monitor_speed = 115200
upload_speed = 1500000

; ========================================
; M5Stack Core (ESP32) - Serial MIDI
; ========================================
[env:m5core]
platform = espressif32
board = m5stack-core-esp32
framework = arduino

build_flags = 
    -DPLATFORM_M5CORE
    -DUSE_SERIAL_MIDI
    -DLED_DATA_PIN=26
    -DLED_COUNT=300

lib_extra_dirs = 
    ../LEDengine
    ../shared_libs

build_src_filter = 
    +<*>
    -<midi_handler.cpp>

lib_deps = 
    m5stack/M5Unified@0.2.10
    fastled/FastLED@3.10.3
    https://github.com/Hemisphere-Project/ESPNowDMX.git
    https://github.com/Hemisphere-Project/ESPNowMeshClock.git

monitor_speed = 115200
upload_speed = 1500000
